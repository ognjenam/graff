function catchMe(e){ajaxPhpCount(e)}function ajaxPhpCount(e){let t=e;$.ajax({url:"models/visits/count_visits.php",method:"post",data:{_page:t},success:function(e){fillStats(e)},error:function(e,t,o){console.log(o)}})}function allAboutStats(){$.ajax({url:"models/visits/all_visits.php",method:"post",success:function(e){fillStats(e)},error:function(e,t,o){console.log(t)}})}function fillStats(e){let t=["home","about","shop","contact"],o="",r=1;for(let a of t)o+=`\n    <tr class='increaseWidth'>\n       <td class="organisationnumber ">${r++}</td>\n       <td class="organisationnumber">${a}</td>\n       <td class="organisationname">`,"home"==a?o+=`${Math.round(e.count_index/e.countAll*100,2)} %`:"about"==a?o+=`${Math.round(e.count_about/e.countAll*100,2)} %`:"shop"==a?o+=`${Math.round(e.count_shop/e.countAll*100,2)} %`:"contact"==a&&(o+=`${Math.round(e.count_contact/e.countAll*100,2)} %`),o+=' </td>\n       <td class="organisationname">',"home"==a?o+=`${e.counter_index_today}`:"about"==a?o+=`${e.counter_about_today}`:"shop"==a?o+=`${e.counter_shop_today}`:"contact"==a&&(o+=`${e.counter_contact_today}`),o+="\n        </td>\n    </tr>";$("#page-visits").html(o)}function product_cart(e){let t=JSON.parse(localStorage.getItem("products")||"[]"),o=JSON.parse(localStorage.getItem("sum")||0),r={id:e.product_ID,name:e.name,price:e.price,image:e.image,date:Date.now()};t.push(r),o+=Number(r.price),localStorage.setItem("products",JSON.stringify(t)),localStorage.setItem("sum",JSON.stringify(o)),fillCart()}function fillCart(){let e=JSON.parse(localStorage.getItem("products")),t=JSON.parse(localStorage.getItem("sum"));0!=JSON.parse(localStorage.getItem("sum"))?$("#empty-flag").hide():$("#empty-flag").show();let o="";for(let t of e)o+=`\n    <div class="shp__cart__wrap">\n       <div class="shp__single__product">\n          <div class="shp__pro__thumb">\n\n             <img src="assets/${t.image}" alt="${t.name}"/>\n\n          </div>\n          <div class="shp__pro__details">\n             <h2>${t.name}</h2>\n             <span class="shp__price">$${t.price}</span>\n          </div>\n          <div class="remove__btn">\n             <a href="#" class="cart-link-remove" data-id = "${t.date}" title="Remove this item"><i class="zmdi zmdi-close"></i></a>\n          </div>\n       </div>\n    </div>\n    `;$("#products-cart").html(o),$(".total__price").html("$"+t)}function fillCategoryValues(){$.ajax({url:"models/categories/all_categories.php",method:"get",dataType:"json",success:function(e){fillCategoryLinks(e)},error:function(e,t,o){console.log(o)}})}function fillCategoryLinks(e){let t="";for(let o of e)t+=`\n  <li data-id = "${o.category_ID}">${o.name}</li>\n\n  `;$(".value-list").html(t)}function category_field(){const e=document.querySelector(".chosen-value"),t=document.querySelector(".value-list");e.placeholder="Choose category";const o=[...document.querySelectorAll(".value-list li")];t.classList.add("open");let r=[];o.forEach(e=>{r.push(e.textContent)});e.addEventListener("input",()=>{t.classList.add("open");let a=e.value.toLowerCase();if(a.length>0)for(let e=0;e<r.length;e++)a.substring(0,a.length)!==r[e].substring(0,a.length).toLowerCase()?o[e].classList.add("closed"):o[e].classList.remove("closed");else for(let e=0;e<o.length;e++)o[e].classList.remove("closed")}),o.forEach(t=>{t.addEventListener("click",r=>{let a=t.textContent,i=t.dataset.id;e.value=a,e.dataset.id=i,o.forEach(e=>{e.classList.add("closed")})})}),e.addEventListener("focus",()=>{category_field(),e.placeholder="Type to filter",t.classList.add("open"),o.forEach(e=>{e.classList.remove("closed")})}),e.addEventListener("blur",()=>{t.classList.remove("open")}),document.addEventListener("click",o=>{const r=t.contains(o.target),a=e.contains(o.target);r||a||t.classList.remove("open")})}function editCategory(e){$("#edit-cat").focus(),$("#hidden-cat").val(e.category_ID),$("#edit-cat").val(e.name)}function editProduct(e){$("#edit-prod").focus(),$("#hidden-prod").val(e.product_ID),$("#edit-prod").val(e.name),$("#edit-descr").val(e.description),$("#edit-price").val(e.price),"object"==typeof e.price_old?$("#edit-old-price").val(""):$("#edit-old-price").val(e.price_old),$("#edit-color").val(e.color),$("#big-image-path").text(e.image_big),$("#small-image-path").text(e.image),document.querySelector("#cat_val").value=e.nameCat,document.querySelector("#cat_val").dataset.id=e.category_ID,document.querySelector("#cat_val").disabled=!0,document.querySelector("#cat_val").classList.add("disabledCat")}function displayCategories(){$.ajax({url:"models/categories/all_categories.php",method:"GET",dataType:"JSON",success:function(e){printCategories(e)},error:function(e,t,o){console.log(t)}})}function printCategories(e){let t="",o="<button  data-id='0' class='is-checked'>All</button>",r=1;for(let o of e)t+=`\n  <tr>\n    <input type="hidden" id="hiddenCat" value="${o.category_ID}">\n     <td class="organisationnumber">${r++}</td>\n     <td class="organisationname">${o.name}</td>\n     <td class="actions">\n        <a href="#" data-id = "${o.category_ID}" class="edit-item" title="Edit">Edit </a> -\n        <a href="#" data-id = "${o.category_ID}" class="remove-item" title="Remove">Remove</a>\n     </td>\n  </tr>\n\n  `;for(let t of e)o+=`\n      <button data-id="${t.category_ID}">${t.name}</button>\n  `;$("#category-table").html(t),$("#category-buttons").html(o)}function displayProdPag(e){$.ajax({url:"models/products/pagination.php",method:"post",dataType:"json",data:{_page:e},success:function(e){fillPagination(e)},error:function(e,t,o){console.log(t)}})}function fillPaginationLinks(e){displayProdPag(e);let t="";for(let o=1;o<=e;o++)o===e?t+=`\n         <li class="list-inline-item active_pagination_li" data-id = "${o}">${o}</li>\n\n       `:o!==e&&(t+=`\n         <li class="list-inline-item" data-id = "${o}">${o}</li>\n\n       `);$("#nav_pagination").html(t)}function fillPagination(e){let t="";for(let o=0;o<e.length;o++)0==o?(t+=`\n      <tr>\n        <input type="hidden" id="hiddenProd" value="${e[o].product_ID}">\n         <td class="organisationnumber">${e[o].product_ID}</td>\n         <td class="organisationname">${e[o].name}</td>\n         <td> <img class="img-size-optimize" src="assets/${e[o].image}"/></td>\n         <td> <img class="img-size-optimize" src="assets/${e[o].image_big}"/></td>\n         <td class="organisationname">&dollar;${e[o].price}</td>\n         <td class="organisationname">`,"object"==typeof e[o].price_old?t+="/":t+=`&dollar;${e[o].price_old}`,t+=`</td>\n         <td class="organisationname resize-descr border-edit-2 no_top_border">${e[o].description}</td>\n         <td class="organisationname">${e[o].color}</td>\n         <td class="organisationname">${e[o].catName}</td>\n         <td class="actions">\n            <a href="#" data-id="${e[o].product_ID}" class="edit-item-product" title="Edit">Edit </a> -\n            <a href="#" data-id="${e[o].product_ID}" class="remove-item-product" title="Remove">Remove</a>\n         </td>\n      </tr>\n      `):(t+=`\n      <tr>\n        <input type="hidden" id="hiddenProd" value="${e[o].product_ID}">\n         <td class="organisationnumber">${e[o].product_ID}</td>\n         <td class="organisationname">${e[o].name}</td>\n         <td> <img class="img-size-optimize" src="assets/${e[o].image}"/></td>\n         <td> <img class="img-size-optimize" src="assets/${e[o].image_big}"/></td>\n         <td class="organisationname">&dollar;${e[o].price}</td>\n         <td class="organisationname">`,"object"==typeof e[o].price_old?t+="/":t+=`&dollar;${e[o].price_old}`,t+=`\n         </td>\n         <td class="organisationname resize-descr border-edit-2">${e[o].description}</td>\n         <td class="organisationname">${e[o].color}</td>\n         <td class="organisationname">${e[o].catName}</td>\n         <td class="actions">\n            <a href="#" data-id="${e[o].product_ID}" class="edit-item-product" title="Edit">Edit </a> -\n            <a href="#" data-id="${e[o].product_ID}" class="remove-item-product" title="Remove">Remove</a>\n         </td>\n      </tr>\n      `);$("#pagination_products").html(t)}function fillRole(e){$("#user-role").focus(),$("#user-role").val(e.roleName),document.querySelector("#user-role").dataset.id=e.user_ID}function updateUsers(){$.ajax({url:"models/users/all_users.php",method:"post",dataType:"json",success:function(e){fillUsers(e)},error:function(e,t,o){console.log(t)}})}function fillUsers(e){let t=["January","February","March","April","May","June","July","August","September","October","November","December"],o="",r=1;for(let a of e){let e=new Date(a.last_visit),i=e.getDate()+"/"+t[e.getMonth()]+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();o+=`\n    <tr>\n      <input type="hidden" id="hiddenUser" value="${a.user_ID}">\n       <td class="organisationnumber">${r++}</td>\n       <td class="organisationname">`,1==a.role_ID?o+=`<p style = 'color: red'> ${a.username}</p>`:o+=`${a.username}`,o+=`</td>\n       <td class="organisationname">${a.e_mail}</td>\n\n       <td>`,1==a.active?o+='<div class="circle green"></div>':o+='<div class="circle red"></div>',o+=`</td>\n       <td data-id = "${a.role_ID}" class="organisationname">${a.role}</td>\n       <td class="organisationname">${i}</td>\n       <td class="actions">\n          <a href="?" data-id="${a.user_ID}" class="edit-item-user" title="Edit">Edit </a>\n       </td>\n    </tr>\n\n    `}$("#users-panel").html(o)}window.onload=function(){$(".spinner").fadeOut(),document.body.classList.remove("preloader_body")},$(document).on("click","#users-panel-link",function(e){e.preventDefault(),updateUsers()}),null!=JSON.parse(localStorage.getItem("products"))&&fillCart(),allAboutStats(),$(document).on("click",".modal-cart",function(e){e.preventDefault();let t=this,o=this.dataset.id;$.ajax({url:"models/products/product_by_id.php",method:"post",dataType:"json",data:{_id:o},success:function(e){$(t).text("Added to cart!").fadeIn().delay(800).fadeOut(500,function(){$(t).text("Add to cart!").fadeIn()}),product_cart(e)},error:function(e,t,o){console.log(o)}})}),$(document).on("click",".cart-link-remove",function(e){e.preventDefault();let t=[],o=0,r=Number(this.dataset.id),a=JSON.parse(localStorage.getItem("products"));for(let e=0;e<a.length;e++)a[e].date!=r&&(t.push(a[e]),o+=Number(a[e].price));localStorage.setItem("products",JSON.stringify(t)),localStorage.setItem("sum",JSON.stringify(o)),fillCart()}),$(document).ready(function(){$("#form-prod").hide()}),null!=document.querySelector(".chosen-value")&&category_field(),$(document).ready(function(){function e(){$("#products").html("<div id='no_products'><p class='jewelryP'><i>No results! <i class='fa fa-frown-o' aria-hidden='true'></i></i></p></div>")}function t(e){let t="";for(let o of e)t+=`\n      <div class="col-md-3 single__pro col-lg-3 col-md-4 col-sm-12">\n         <div class="product foo">\n            <div class="product__inner">\n               <div class="pro__thumb">\n                  <a href="#">\n                  <img src="assets/${o.image}" alt="${o.name}">\n                  </a>\n               </div>\n               <div class="product__hover__info">\n                  <ul class="product__action">\n                     <li><a data-toggle="modal" data-id = "${o.product_ID}" data-target=".productModal" title="Quick View" class="quick-view modal-view detail-link" href="#"><span class="ti-plus"></span></a></li>\n\n                  </ul>\n               </div>\n            </div>\n            <div class="product__details">\n               <h2><a href="product-details.html">${o.name}</a></h2>\n               <ul class="product__price">`,"object"!=typeof o.price_old&&(t+=`<li class="old__price">&dollar;${o.price_old}</li>`),t+=`\n                  <li class="new__price">&dollar;${o.price}</li>\n               </ul>\n            </div>\n         </div>\n      </div>\n      `;$("#products").html(t)}$(document).on("click",".product__menu button",function(){let e=$(this).data("id");0!=e?$.ajax({url:"models/products/filter.php",method:"get",dataType:"json",data:{_id:e},success:function(e){t(e)},error:function(e,t,o){console.log(o)}}):$.ajax({url:"models/products/all_products.php",method:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,o){console.log(t)}})}),$(document).on("click","#search_button",function(e){e.preventDefault()}),$(document).on("click","#search_button",function(){let o=$("#inputSearch").val();""!=o?$.ajax({url:"models/products/filter_search.php",method:"get",dataType:"json",data:{_val:o},success:function(o){o.length>0?t(o):e()},error:function(e,t,o){console.log(t)}}):e()})}),$(document).ready(function(){$(document).on("click",".edit-item",function(e){e.preventDefault(),document.querySelector("#edit-btn-cat").disabled=!1,document.querySelector("#edit-btn-cat").classList.remove("disabledCat"),$("#errorNameEditCat").text("");let t=$(this).data("id");$.ajax({url:"models/categories/category_by_id.php",method:"post",dataType:"JSON",data:{_id:t},success:function(e){editCategory(e)},error:function(e,t,o){console.log(t)}})}),$(document).on("click","#edit-btn-cat",function(e){if(e.preventDefault(),""!=$("#edit-cat").val()){let e=$("#edit-cat").val(),t=$("#hidden-cat").val();/^[A-z]{1,}(\s([A-z]{1,}))*$/.test(e)?($("#errorNameEditCat").text(""),$.ajax({url:"models/categories/edit_category.php",method:"post",dataType:"JSON",data:{_category_name:e,_category_id:t},success:function(e){$("#edit-cat").val(""),displayCategories(),e.nameHint&&$("#errorNameEditCat").text(e.nameHint)},error:function(e,t,o){console.log(t)}}),$("#hidden-cat").val(""),document.querySelector("#edit-btn-cat").disabled=!0,document.querySelector("#edit-btn-cat").classList.add("disabledCat")):$("#errorNameEditCat").text("A-z")}})}),$(document).ready(function(){$(document).on("click",".remove-item",function(e){e.preventDefault();let t=$(this).data("id");$("#edit-cat").val(""),$.ajax({url:"models/categories/delete_by_id.php",method:"post",dataType:"JSON",data:{_category_id:t},success:function(){displayCategories(),fillCategoryValues()},error:function(e,t,o){console.log(t)}})})}),$(document).ready(function(){$(document).on("click","#add-cat",function(e){e.preventDefault();let t=$("#add-cat-value").val();/^[A-z]{1,}(\s([A-z]{1,}))*$/.test(t)?($("#errorNameCat").text(""),$.ajax({url:"models/categories/add_category.php",method:"post",dataType:"JSON",data:{_name:t},success:function(e){$("#add-cat-value").val(""),displayCategories(),fillCategoryValues(),e.nameHint&&$("#errorNameCat").text(e.nameHint)},error:function(e,t,o){console.log(t)}})):$("#errorNameCat").text("A-z")})}),$(document).ready(function(){$(document).on("change","#small-image",function(){let e=$("#small-image").val().split("\\");$("#small-image-path").text(e[2]),""==$("#small-image-path").text()?$("#errorSmallImgEditProd").text("Choose small image..."):$("#errorSmallImgEditProd").text("")}),$(document).on("change","#big-image",function(){let e=$("#big-image").val().split("\\");$("#big-image-path").text(e[2]),""==$("#big-image-path").text()?$("#errorBigImgEditProd").text("Choose cover image..."):$("#errorBigImgEditProd").text("")})}),$(document).ready(function(){$(document).on("click",".edit-item-product",function(e){e.preventDefault(),$("#form-prod").show(),$("#add-product").hide(),$("#edit-values-product").show(),$("#errorNameEditProd").hide(),$("#errorDescrEditProd").hide(),$("#errorPriceEditProd").hide(),$("#errorOldPriceEditProd").hide(),$("#errorColorEditProd").hide(),$("#errorChooseCatEditProd").hide(),$("#errorBigImgEditProd").hide(),$("#errorSmallImgEditProd").hide();let t=$(this).data("id");$.ajax({url:"models/products/product_by_id.php",method:"post",dataType:"JSON",data:{_id:t},success:function(e){editProduct(e)},error:function(e,t,o){console.log(t)}})}),$(document).on("click","#edit-values-product",function(e){e.preventDefault();let t=$("#hidden-prod").val(),o=$("#edit-prod").val(),r=$("#edit-descr").val(),a=$("#edit-price").val(),i=$("#edit-old-price").val(),s=$("#edit-color").val(),n=$("#small-image-path").text(),l=$("#big-image-path").text(),d=(document.querySelector("#cat_val").dataset,document.querySelector("#cat_val").dataset.id),c=/^[A-z]{1,}(\s([A-z]{1,}))*$/,u=/^[1-9]{1}[0-9]{1,}\.[0-9][0-9]$/,m=!0;if(c.test(o)?$("#errorNameEditProd").text(""):(m=!1,$("#errorName-Edit-Edit-Prod").text("A-z")),c.test(r)?$("#errorDescr-Edit-Edit-Prod").text(""):(m=!1,$("#errorDescr-Edit-Edit-Prod").text("A-z")),c.test(s)?$("#errorColor-Edit-Edit-Prod").text(""):(m=!1,$("#errorColor-Edit-Edit-Prod").text("A-z")),u.test(a)?$("#errorPrice-Edit-Edit-Prod").text(""):(m=!1,$("#errorPrice-Edit-Edit-Prod").text("nn.nn")),""!=i&&(u.test(i)?$("#errorOldPrice-Edit-Edit-Prod").text(""):(m=!1,$("#errorOldPrice-Edit-Edit-Prod").text("nn.nn"))),""==n&&(m=!1,$("#errorSmallImg-Edit-Edit-Prod").text("Choose small image...")),""==l&&(m=!1,$("#errorBigImg-Edit-Edit-Prod").text("Choose cover image...")),""==document.querySelector("#cat_val").value?(m=!1,$("#errorChooseCat-Edit-Edit-Prod").text("Please choose...")):$("#errorChooseCat-Edit-Edit-Prod").text(""),1==m){document.getElementById("form-prod");let e=new XMLHttpRequest,n=new FormData;n.append("_name",o),n.append("_descr",r),n.append("_price",a),n.append("_old_price",i),n.append("_color",s),n.append("_product_id",t),n.append("_category",d);let l=document.querySelector("#big-image"),c=document.querySelector("#small-image");$("#small-image-path").text(),$("#big-image-path").text();null!=l.files[0]&&n.append("big_image_file",l.files[0]),null!=c.files[0]&&n.append("small_image_file",c.files[0]),e.open("post","models/products/update_product.php"),e.responseType="json",e.send(n),e.onload=function(){$("#errorName-Edit-Edit-Prod").text(e.response.errorName),$("#errorDescr-Edit-Edit-Prod").text(e.response.errorDescr),$("#errorColor-Edit-Edit-Prod").text(e.response.errorColor),$("#errorPrice-Edit-Edit-Prod").text(e.response.errorPrice),$("#errorOldPrice-Edit-Edit-Prod").text(e.response.errorOldPrice),$("#errorSmallImg-Edit-Edit-Prod").text(e.response.errorSmallImage),$("#errorBigImg-Edit-Edit-Prod").text(e.response.errorBigImage),$("#errorChooseCat-Edit-Edit-Prod").text(e.response.errorCat)},$("#big-image").val(""),$("#small-image").val(""),$("#hidden-prod").val(""),$("#edit-prod").val(""),$("#edit-descr").val(""),$("#edit-price").val(""),$("#edit-old-price").val(""),$("#edit-color").val(""),$("#small-image-path").text(""),$("#big-image-path").text(""),document.querySelector("#cat_val").value=""}})}),$(document).ready(function(){$(document).on("click",".remove-item-product",function(e){e.preventDefault();let t=$(this).data("id");$.ajax({url:"models/products/delete_prod_by_id.php",method:"post",dataType:"JSON",data:{_prod_id:t},success:function(){$.ajax({url:"models/products/count_products.php",method:"post",dataType:"json",success:function(e){displayProdPag(e),fillPaginationLinks(e)},error:function(e,t,o){console.log(o)}})},error:function(e,t,o){console.log(t)}})})}),$(document).ready(function(){$(document).on("click","#add-prod-btn",function(){$("#form-prod").show(),$("#add-product").show(),$("#edit-values-product").hide(),document.querySelector("#cat_val").disabled=!1,document.querySelector("#cat_val").classList.remove("disabledCat"),$("#edit-prod").val(""),$("#edit-descr").val(""),$("#edit-price").val(""),$("#edit-old-price").val(""),$("#edit-color").val(""),$("#big-image-path").text(""),$("#small-image-path").text(""),document.querySelector("#cat_val").value="",$("#edit-prod").focus(),$("#edit-btn-descr").hide(),$("#edit-btn-price").hide(),$("#edit-btn-oldprice").hide(),$("#edit-btn-color").hide(),$("#edit-btn-cover").hide(),$("#edit-btn-small").hide()}),$(document).on("click","#add-product",function(e){e.preventDefault();let t=$("#edit-prod").val(),o=$("#edit-descr").val(),r=$("#edit-price").val(),a=$("#edit-old-price").val(),i=$("#edit-color").val(),s=$("#small-image-path").text(),n=$("#big-image-path").text(),l=s.split(".")[1],d=n.split(".")[1],c=document.querySelector("#cat_val").dataset,u=document.querySelector("#cat_val").dataset.id,m=/^[A-z]{1,}(\s([A-z]{1,}))*$/,p=/^[1-9]{1}[0-9]{1,}\.[0-9][0-9]$/,g=!0;if(m.test(t)?$("#errorNameEditProd").text(""):(g=!1,$("#errorNameEditProd").text("A-z")),/[\w\d\W\D]/.test(o)?$("#errorDescrEditProd").text(""):(g=!1,$("#errorDescrEditProd").text("(words, numbers, special symbols)")),m.test(i)?$("#errorColorEditProd").text(""):(g=!1,$("#errorColorEditProd").text("A-z")),p.test(r)?$("#errorPriceEditProd").text(""):(g=!1,$("#errorPriceEditProd").text("nn.nn")),""!=a&&(p.test(a)?$("#errorOldPriceEditProd").text(""):(g=!1,$("#errorOldPriceEditProd").text("nn.nn"))),""!=s?"jpg"!=l&&"jpeg"!=l&&"png"!=l&&(g=!1,$("#errorSmallImgEditProd").text("JPG / JPEG / PNG")):(g=!1,$("#errorSmallImgEditProd").text("Choose small image...")),""!=n?"jpg"!=d&&"jpeg"!=d&&"png"!=d&&(g=!1,$("#errorBigImgEditProd").text("JPG / JPEG / PNG")):(g=!1,$("#errorBigImgEditProd").text("Choose cover image...")),c.hasOwnProperty("id")?$("#errorChooseCatEditProd").text(""):(g=!1,$("#errorChooseCatEditProd").text("Please choose...")),1==g){$.ajax({url:"models/products/count_products.php",method:"post",dataType:"json",success:function(e){fillPaginationLinks(e),fillPagination(e)},error:function(e,t,o){console.log(o)}});document.getElementById("form-prod");let e=new XMLHttpRequest,s=new FormData,n=document.querySelector("#big-image"),l=document.querySelector("#small-image");s.append("big_image",n.files[0]),s.append("small_image",l.files[0]),s.append("_name",t),s.append("_descr",o),s.append("_price",r),s.append("_old_price",a),s.append("_color",i),s.append("_category",u),e.open("post","models/products/insert_product.php"),e.responseType="json",e.send(s),$("#big-image").val(""),$("#small-image").val(""),$("#hidden-prod").val(""),$("#edit-prod").val(""),$("#edit-descr").val(""),$("#edit-price").val(""),$("#edit-old-price").val(""),$("#edit-color").val(""),$("#small-image-path").text(""),$("#big-image-path").text(""),document.querySelector("#cat_val").value=""}})}),$(document).ready(function(){$(document).on("click",".list-inline-item",function(){displayProdPag($(this).data("id"))})}),$(document).ready(function(){let e=$(".list-inline-item")[0];$(e).addClass("active_pagination_li")}),$(document).on("click",".list-inline-item",function(){$(this).addClass("active_pagination_li").siblings().removeClass("active_pagination_li")}),$(document).on("click",".edit-item-user",function(e){e.preventDefault();let t=this.dataset.id;$.ajax({url:"models/users/role.php",method:"post",dataType:"json",data:{_user_id:t},success:function(e){fillRole(e)},error:function(e,t,o){console.log(t)}})}),$(document).on("click","#submit-user-role",function(e){let t=document.querySelector("#user-role").dataset.id,o=document.querySelector("#user-role").value;"admin"!=o&&"user"!=o?$("#errorRoleUser").text("admin / user"):"admin"!=o&&"user"!=o||($("#errorRoleUser").text(""),$.ajax({url:"models/users/change_role.php",method:"post",dataType:"json",data:{_user_id:t,_role_name:o},success:function(e){updateUsers()},error:function(e,t,o){console.log(t)}}))}),$(document).on("click","#btnRegister",function(){let e=document.querySelector("#signup-username").value,t=document.querySelector("#signup-email").value,o=document.querySelector("#signup-password").value,r=!0;/^[a-z]{3,8}(\_[a-z]{0,8})*$/.test(e)?($("#regErrorUsername").html(""),$("#regErrorUsername").css("visibility","hidden")):(r=!1,$("#regErrorUsername").html("begin with letters (3-8 characters), underscore"),$("#regErrorUsername").css("visibility","visible")),/^[A-z\d]{2,}(\.?(\W\D)?[A-z\d]{2,})*\@\w{2,}(\.\w{2,})(\.\w{2,})*$/.test(t)?($("#regErrorEmail").html(""),$("#regErrorEmail").css("visibility","hidden")):(r=!1,$("#regErrorEmail").html("xx (. xx) @ xx . xx (. xx)"),$("#regErrorEmail").css("visibility","visible")),/([\w\W\D\d]){7,}/.test(o)?($("#regErrorPassword").html(""),$("#regErrorPassword").css("visibility","hidden")):(r=!1,$("#regErrorPassword").html("at least 7 characters"),$("#regErrorPassword").css("visibility","visible")),1==r&&$(document).ready(function(){$.ajax({url:"models/users/register.php",method:"post",dataType:"json",data:{_username:e,_email:t,_password:o},success:function(e){e.errorUsername?($("#regErrorUsername").html(e.errorUsername),$("#regErrorUsername").css("visibility","visible")):($("#regErrorUsername").html(""),$("#regErrorUsername").css("visibility","hidden")),e.errorEmail?($("#regErrorEmail").html(e.errorEmail),$("#regErrorEmail").css("visibility","visible")):($("#regErrorEmail").html(""),$("#regErrorEmail").css("visibility","hidden")),e.errorPassword?($("#regErrorPassword").html(e.errorPassword),$("#regErrorPassword").css("visibility","visible")):($("#regErrorPassword").html(""),$("#regErrorPassword").css("visibility","hidden")),1==e.inserted&&(window.location.href="index.php")},error:function(e,t,o){console.log(t)}})})}),$(document).on("click","#btnLogin",function(){let e=document.querySelector("#signin-email").value,t=document.querySelector("#signin-password").value,o=!0;/^[A-z\d]{2,}(\.?(\W\D)?[A-z\d]{2,})*\@\w{2,}(\.\w{2,})(\.\w{2,})*$/.test(e)?($("#logErrorEmail").html(""),$("#logErrorEmail").css("visibility","hidden")):(o=!1,$("#logErrorEmail").html("xx (. xx) @ xx . xx (. xx)"),$("#logErrorEmail").css("visibility","visible")),/([\w\W\D\d]){7,}/.test(t)?($("#logErrorPassword").html(""),$("#logErrorPassword").css("visibility","hidden")):(o=!1,$("#logErrorPassword").html("at least 7 characters"),$("#logErrorPassword").css("visibility","visible")),1==o&&$(document).ready(function(){$.ajax({url:"models/users/login.php",method:"post",dataType:"json",data:{_email:e,_password:t},success:function(e){e.errorEmail?($("#logErrorEmail").html(e.errorEmail),$("#logErrorEmail").css("visibility","visible")):($("#logErrorEmail").html(""),$("#logErrorEmail").css("visibility","hidden")),e.errorPassword?($("#logErrorPassword").html(e.errorPassword),$("#logErrorPassword").css("visibility","visible")):($("#logErrorPassword").html(""),$("#logErrorPassword").css("visibility","hidden")),e.newPassword&&($("#logErrorPassword").html(e.newPassword),$("#logErrorPassword").css("visibility","visible"),setTimeout(function(){window.location.href="index.php"},2500)),1==e.admin?window.location.href="index.php":2==e.user&&(window.location.href="index.php")},error:function(e,t,o){console.log(t)}})})}),$(document).on("click","#btn-contact",function(e){e.preventDefault();let t=document.querySelector("#contact-name").value,o=document.querySelector("#contact-subject").value,r=document.querySelector("#contact-message").value,a=document.querySelector("#contact-email").value,i=document.querySelector("#error-contact-name"),s=document.querySelector("#error-contact-subject"),n=document.querySelector("#error-contact-message"),l=document.querySelector("#error-contact-email"),d=!0;/^[A-Z][a-z]{1,}(\s[A-Z][a-z]{1,})*$/.test(t)?i.textContent="":(d=!1,i.textContent="A-z (at least 2 letters)"),/^[A-z]{3,}(\s[A-z]{3,})*$/.test(o)?s.textContent="":(d=!1,s.textContent="A-z (at least 3 letters)"),/^[A-z]{5,}(\W\D\d\s)*/.test(r)?n.textContent="":(d=!1,n.textContent="Start at least with 5 letters..."),/^[A-z\d]{2,}(\.?(\W\D)?[A-z\d]{2,})*\@\w{2,}(\.\w{2,})(\.\w{2,})*$/.test(a)?l.textContent="":(d=!1,l.textContent="xx (. xx) @ xx . xx (. xx)"),1==d&&$.ajax({url:"models/users/contact_form.php",method:"post",dataType:"json",data:{_name:t,_subject:o,_message:r,_email:a},success:function(e){""!=e.errorName?i.textContent=e.errorName:i.textContent="",""!=e.errorMessage?n.textContent=e.errorMessage:n.textContent="",""!=e.errorSubject?s.textContent=e.errorSubject:s.textContent="",""!=e.errorEmail?l.textContent=e.errorEmail:l.textContent="",document.querySelector(".form-message").textContent=e.response,document.querySelector("#contact-name").value="",document.querySelector("#contact-email").value="",document.querySelector("#contact-subject").value="",document.querySelector("#contact-message").value=""},error:function(e,t,o){console.log(t)}})}),$(document).ready(function(){$(".prevNext").html('<div class="owl-page left"><span class></span></div><div class="owl-page right"><span class></span></div>'),$(".owl-page span").click(function(){$(".owl-page span.activeSlide").removeClass("activeSlide"),$(this).addClass("activeSlide")}),$(".contact__details a").click(function(e){e.preventDefault()})}),$(document).ready(function(){$(".main__menu li a").click(function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var o=t.offset().top;$("body, html").animate({scrollTop:o+"px"},800)}}),$(".search__open a").click(function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var o=t.offset().top;$("body, html").animate({scrollTop:o+"px"},800)}})}),$(document).ready(function(){$(".mobile_menu li a").click(function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var o=t.offset().top;$("body, html").animate({scrollTop:o+"px"},800)}})}),$(document).ready(function(){$("#mce-EMAIL").on("focus",function(){$("#mc-embedded-subscribe").addClass("btnBorderLeft")}),$("#mce-EMAIL").on("blur",function(){$("#mc-embedded-subscribe").removeClass("btnBorderLeft")})}),function(e){"use strict";e(".mobile-menu nav").meanmenu({meanMenuContainer:".mobile-menu-area",meanScreenWidth:"991",meanRevealPosition:"right"}),(new WOW).init(),e(".htc__product__container").imagesLoaded(function(){e(".product__menu").on("click","button",function(){var o=e(this).attr("data-filter");t.isotope({filter:o})});var t=e(".product__list").isotope({itemSelector:".single__pro",percentPosition:!0,transitionDuration:"0.7s",layoutMode:"fitRows",masonry:{columnWidth:1}})}),e(".product__menu button").on("click",function(t){e(this).siblings(".is-checked").removeClass("is-checked"),e(this).addClass("is-checked"),t.preventDefault()});var t=e(window),o=e("#sticky-header-with-topbar");t.on("scroll",function(){t.scrollTop()<245?o.removeClass("scroll-header"):o.addClass("scroll-header")}),e.scrollUp({scrollText:'<i class="zmdi zmdi-chevron-up"></i>',easingType:"linear",scrollSpeed:900,animation:"fade"}),e('[data-toggle="tooltip"]').tooltip({animated:"fade",placement:"top",container:"body"}),window.sr=ScrollReveal({duration:800,reset:!1}),sr.reveal(".foo"),sr.reveal(".bar");var r=e(".htc__foooter__area");e(".fixed__footer").css({"margin-bottom":r.height()+"px"}),e(".search__open").on("click",function(){return e("body").toggleClass("search__box__show__hide"),!1}),e(".search__close__btn .search__close__btn_icon").on("click",function(){return e("body").toggleClass("search__box__show__hide"),!1}),e(".toggle__menu").on("click",function(){e(".offsetmenu").addClass("offsetmenu__on"),e(".body__overlay").addClass("is-visible")}),e(".offsetmenu__close__btn").on("click",function(){e(".offsetmenu").removeClass("offsetmenu__on"),e(".body__overlay").removeClass("is-visible")}),e(".cart__menu").on("click",function(){e(".shopping__cart").addClass("shopping__cart__on"),e(".body__overlay").addClass("is-visible")}),e(".offsetmenu__close__btn").on("click",function(){e(".shopping__cart").removeClass("shopping__cart__on"),e(".body__overlay").removeClass("is-visible")}),e(".filter__menu").on("click",function(){e(".filter__wrap").addClass("filter__menu__on"),e(".body__overlay").addClass("is-visible")}),e(".filter__menu__close__btn").on("click",function(){e(".filter__wrap").removeClass("filter__menu__on"),e(".body__overlay").removeClass("is-visible")}),e(".user__menu").on("click",function(){e(".user__meta").addClass("user__meta__on"),e(".body__overlay").addClass("is-visible")}),e(".offsetmenu__close__btn").on("click",function(){e(".user__meta").removeClass("user__meta__on"),e(".body__overlay").removeClass("is-visible")}),e(".body__overlay").on("click",function(){e(this).removeClass("is-visible"),e(".offsetmenu").removeClass("offsetmenu__on"),e(".shopping__cart").removeClass("shopping__cart__on"),e(".filter__wrap").removeClass("filter__menu__on"),e(".user__meta").removeClass("user__meta__on")}),e(".slider__activation__wrap").length&&e(".slider__activation__wrap").owlCarousel({loop:!0,margin:0,nav:!0,autoplay:!1,navText:['<i class="zmdi zmdi-chevron-left"></i>','<i class="zmdi zmdi-chevron-right"></i>'],autoplayTimeout:1e4,items:1,dots:!1,lazyLoad:!0,responsive:{0:{items:1},1920:{items:1}}}),e(".slider__activation__02").length&&e(".slider__activation__02").owlCarousel({loop:!0,margin:0,nav:!1,autoplay:!1,autoplayTimeout:1e4,items:1,dots:!1,lazyLoad:!0,responsive:{0:{items:1},1920:{items:1}}}),e(".popular__product__wrap").owlCarousel({loop:!0,margin:0,nav:!0,autoplay:!1,navText:['<i class="zmdi zmdi-chevron-left"></i>','<i class="zmdi zmdi-chevron-right"></i>'],autoplayTimeout:1e4,items:3,dots:!1,lazyLoad:!0,responsive:{0:{items:1},600:{items:2},800:{items:2},1024:{items:3},1200:{items:3},1400:{items:3},1920:{items:3}}}),e(".testimonial__wrap").owlCarousel({loop:!0,margin:0,nav:!1,autoplay:!1,navText:!1,autoplayTimeout:1e4,items:1,dots:!1,lazyLoad:!0,responsive:{0:{items:1},600:{items:1},800:{items:1},1024:{items:1},1200:{items:1},1400:{items:1},1920:{items:1}}}),e(".video-popup").magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,zoom:{enabled:!0}}),e(".image-popup").magnificPopup({type:"image",mainClass:"mfp-fade",removalDelay:100,gallery:{enabled:!0}}),e("#slider-range").slider({range:!0,min:10,max:500,values:[110,400],slide:function(t,o){e("#amount").val("$"+o.values[0]+" - $"+o.values[1])}}),e("#amount").val("$"+e("#slider-range").slider("values",0)+" - $"+e("#slider-range").slider("values",1)),e(".cart-plus-minus").append('<div class="dec qtybutton">-</i></div><div class="inc qtybutton">+</div>'),e(".qtybutton").on("click",function(){var t=e(this),o=t.parent().find("input").val();if("+"==t.text())var r=parseFloat(o)+1;else if(o>1)r=parseFloat(o)-1;else r=1;t.parent().find("input").val(r)}),e(".onepage--menu").onePageNav({scrollOffset:0})}(jQuery);
